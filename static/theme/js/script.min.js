"use strict";
/*! Do not touch this file!
site v0.1.0 */
var app=function(){"use strict";var a={root:"",base:"",dom:{$window:$(window),$document:$(document)},utils:{},components:{},modules:{},views:{},initialize:function(){this.base=$("base").attr("href"),this.root=this.base.substr(8).substr(this.base.substr(8).indexOf("/")),this._initGlobal(),this._initHistory()},_initHistory:function(){var a=this,b=!1;app.dom.$document.on("keydown",function(a){(17===a.keyCode||16===a.keyCode)&&(b=!0)}).on("keyup",function(a){(17===a.keyCode||16===a.keyCode)&&(b=!1)}),this.dom.$document.on("click.routing","a[href]:not([data-not-ajax]):not([href$='.jpg'],a[href$='.png'],a[href$='.svg'])",function(c){if(!b){var d=$(this),e={prop:d.prop("href"),attr:d.attr("href")};if(app.utils.getData=app.utils.parseUrlQuery(e.attr),"./"===e.attr&&(e.attr=""),e.prop.slice(0,a.base.length)===a.base){c.preventDefault();var f=window.location.protocol+"//"+window.location.hostname+window.location.pathname,g=e.prop.split("?");f===g[0]?(app.Router.navigate(e.attr,{trigger:!1}),app.trigger("checkGetParams")):app.Router.navigate(e.attr,{trigger:!0})}}})},_initGlobal:function(){app.utils.getDirection.init(),app.components.loader=app.components.Loader,app.components.loader.show(),app.Router=new app.modules.Router,app.GlobalView=new app.views.GlobalView({el:$(".grid")}),app.Header=new app.views.Header,app.Footer=new app.views.Footer,app.Header.render(),app.Footer.render(),Backbone.history.start({pushState:!0,hashChange:!1,root:this.root})}};return _.extend(a,Backbone.Events),a}();app.components.Loader=function(){"use strict";function a(){function a(){b.obj=$(".js-loader")}var b=this;this.obj=null,this.isVisilbe=!1,this.nobg=!1,a()}return a.prototype.show=function(){return this.isVisilbe||(this.nobg&&this.obj.addClass("_nobg"),this.obj.fadeIn(300,function(){}),this.isVisilbe=!0),this},a.prototype.hide=function(a){function b(){c.obj.stop().fadeOut(1e3).removeClass("_nobg"),c.nobg=!1,c.isVisilbe=!1}var c=this;c.isVisilbe&&b()},new a}(),app.Size=function(){function a(){var a=function(a,b){return function(){return a.apply(b,arguments)}},c=this,d=/iPod|iPad|iPhone/g.test(navigator.userAgent)?"orientationchange load":"resize load";c.width=null,c.height=null,c.orientationChange=a(c.orientationChange,c),/android/gi.test(navigator.userAgent)?app.dom.$window.on("load",function(){return setTimeout(c.orientationChange,b)}):app.dom.$window.on(d,c.orientationChange),c.orientationChange()}var b=300,c=320,d=212;return a.prototype={orientationChange:function(){var a=this,b=a.height,e=a.width;a.height=Modernizr.touch?window.innerHeight:app.dom.$window.height(),a.width=app.dom.$window.width(),a.width=Math.max(c,a.width),a.height=Math.max(d,a.height),(a.width!==e||a.height!==b)&&app.trigger("resize",a.getSize())},getSize:function(){return{width:this.width,height:this.height}}},new a}(),function(){"use strict";app.utils.getData=null,app.utils.getScrollPosition=function(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:0},app.utils.okonchanie=function(a,b,c,d){var e=parseInt(a)!==parseFloat(a);return a+="",a.length>1&&"1"==+a.substr(a.length-2,1)||+a.substr(a.length-1,1)>4&&+a.substr(a.length-1,1)<10&&!e?d:"1"!=a.substr(a.length-1,1)||e?c:b},app.utils.isIPhone=function(){return/iPhone|iPod/i.test(navigator.userAgent)},app.utils.parseUrlQuery=function(a){var b,c,d,e=a&&a.indexOf("?"),f={};if(a=a?-1!==e?a.substr(e+1):null:location.search&&location.search.substr(1))for(d=a.split("&"),b=0;b<d.length;b++)c=d[b].split("="),f[c[0]]=c[1];return f},app.utils.insertParam=function(a,b){a=encodeURI(a),b=encodeURI(b);for(var c,d=document.location.search.substr(1).split("&"),e=d.length;e--;)if(c=d[e].split("="),c[0]==a){c[1]=b,d[e]=c.join("=");break}0>e&&(d[d.length]=[a,b].join("="));var f=[];return _.each(d,function(a,b){""!=a&&f.push(a)}),"?"+f.join("&")},app.utils.insertParam2=function(a,b,c){return b=encodeURI(b),c=encodeURI(c),a+=-1!==a.indexOf("?")?"&"+[b,c].join("="):"?"+[b,c].join("=")},app.utils.scrollWidth=function(){var a=document.createElement("div");a.style.overflowY="scroll",a.style.width="50px",a.style.height="50px",a.style.visibility="hidden",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b},app.utils.doubleNumber=function(a){return a=a.toString(),1===a.length?"0"+a:a},app.utils.getDirection={direction:1,lastScrollTop:0,init:function(){var a=this;$(window).scroll(function(){var b=$(window).scrollTop();a.lastScrollTop<=b?a.direction=1:a.direction=-1,a.lastScrollTop=b})}},app.utils.heightLikeWindow=function(a,b){function c(){a.css({height:app.Size.height})}c(),app.on("resize",c,b)},app.utils.sizeLikeWindow=function(a,b){function c(b){a.css(b)}c(app.Size.getSize()),app.on("resize",c,b)},app.utils.getBackgroundImageUrl=function(a){var b=a[0].currentStyle||window.getComputedStyle(a[0],!1);return b.backgroundImage.slice(4,-1).replace(/"/g,"")}}(),app.views.Default=Backbone.View.extend({loader:null,popup:null,html:null,needGoIn:!1,className:null,pageHolder:null,subView:{},$bigGallery:null,defLoadAllImages:null,defGoIn:null,defLoaderHide:null,defaultLoaderHide:!0,initialize:function(){this.loader=app.components.loader,app.on("checkGetParams",this.checkGetParams,this)},setProps:function(a,b){this.html=a,this.className=b},render:function(){var a=this;a.loader.hide(),app.dom.$window.scrollTop(0),a.html?(app.GlobalView.$el.append(a.html),a.setElement(app.GlobalView.$el.find('[data-view="'+a.className+'"]')),app.trigger("dom.append"),a.needGoIn&&a.goIn()):a.goIn()},afterRender:function(){this.checkGetParams()},checkGetParams:function(){function a(){var a=-1,c=window.location.pathname.split("/")[1];"guarantee"==app.utils.getData["goto"]?a=5:"information"==c&&(a=4),a>-1&&app.GlobalView.selectCurrentMenu(a),setTimeout(function(){$("html, body").stop(!0,!0).animate({scrollTop:b.offset().top},500)},310)}if(app.utils.getData||(app.utils.getData=app.utils.parseUrlQuery(window.location.search)),app.utils.getData["goto"]){var b=$(app.utils.getData["goto"]);b.length&&(app.Router._pageCounter?a():$(window).load(a))}else b=$("body"),a()},goOutDefault:function(){var a=this;app.trigger("View.goOutDefaultStart"),setTimeout(function(){a.remove(),app.trigger("View.goOutDefaultEnd")},300)},goIn:function(){var a=this;a.$el.css({display:"none"}),a.$el.fadeIn(600),app.trigger("View.goIn")},remove:function(){var a=this;a.trigger("remove"),a.off(),app.off(null,null,a),_.each(a.subView,function(b,c){app.off(null,null,b),b.remove(),delete a.subView[c]}),a.subView=null,app.views.Default.__super__.remove.apply(a,arguments)},initGoto:function(){this.$el.on("click","[data-goto]",function(a){a.preventDefault(),$("html, body").animate({scrollTop:$($(this).data("goto")).offset().top-app.Header.$el.find("[data-head-top]").height()},500)})}}),app.views.Footer=Backbone.View.extend({el:".footer",render:function(){app.views.Footer.__super__.render.apply(this,arguments);return this}}),app.views.GlobalView=Backbone.View.extend({oldViews:[],currentView:null,loader:null,menuItems:null,initialize:function(){this.loader=app.components.loader,this.menuItems=$("[data-head-menu-item]")},selectCurrentMenu:function(a){void 0===a&&(a=0),this.menuItems.removeClass("_active").filter('[data-head-menu-item="'+a+'"]').addClass("_active")},show:function(a){var b=this;a.render(),b.currentView=a},hide:function(){var a=this;app.once("View.goOutDefaultStart",function(){a.loader.show()}),a.currentView.goOutDefault()},setTitle:function(a){$("title").html(a)}}),app.views.Header=Backbone.View.extend({el:".header",subView:{},initialize:function(){},render:function(){app.views.Header.__super__.render.apply(this,arguments)}}),app.views.Home=app.views.Default.extend({events:{},initialize:function(){app.views.Home.__super__.initialize.apply(this,arguments)},remove:function(){app.views.Home.__super__.remove.apply(this,arguments)},render:function(){app.views.Home.__super__.render.apply(this,arguments);app.views.Home.__super__.afterRender.apply(this,arguments)}}),app.views.NotFound=app.views.Default.extend({remove:function(){app.views.NotFound.__super__.remove.apply(this,arguments)},render:function(){app.views.NotFound.__super__.render.apply(this,arguments)}}),app.views.Page1=app.views.Default.extend({events:{},initialize:function(){app.views.Page1.__super__.initialize.apply(this,arguments)},remove:function(){app.views.Page1.__super__.remove.apply(this,arguments)},render:function(){app.views.Page1.__super__.render.apply(this,arguments);app.views.Page1.__super__.afterRender.apply(this,arguments)}}),app.modules.Router=Backbone.Router.extend({_pageCounter:0,routes:{"*href":"baseRout"},baseRout:function(){var a,b=Backbone.history.fragment||"./",c="NotFound";if(this._pageCounter){var d=$.Deferred(),e=$.Deferred(),f=$.when(d,e);f.done(function(){a.html&&a.render()}),app.once("View.goOutDefaultEnd",function(){d.resolve()}),app.once("View.ajax.complete",function(){e.resolve()}),app.GlobalView.hide(),$.get(b+window.location.search,{},function(b){b.jsview&&""!=$.trim(b.jsview)&&(a=new app.views[b.jsview],app.GlobalView.show(a),a.setProps(b.body,b.jsview),a.needGoIn=!0,app.trigger("View.ajax.complete"),app.GlobalView.setTitle(b.title),app.GlobalView.selectCurrentMenu(b.sectionId))},"json")}else{var g=$("[data-view]");g.length&&""!=$.trim(g.data("view"))&&(c=app.views[g.data("view")],a=new c({el:g}),app.GlobalView.show(a))}this._pageCounter++}}),function(){var a,b;jQuery.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=jQuery.uaMatch(navigator.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),jQuery.browser=b}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),$(function(){app.initialize()});